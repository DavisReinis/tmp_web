{% extends 'base.html' %}

{% block title %}Teātra dienasgrāmata {% endblock %}

{% block content %}

    <div class="container my-5">
        <h1>Izveido savu teātra dienasgrāmatu!</h1>
    </div>

    <div class="container my-5">
        <h1>Izveido savu teātra dienasgrāmatu!</h1>
        <button id="reset-filter" class="btn btn-secondary mt-3">Rādīt visus</button>
    </div>

    <div class="container">
        <div class="list-group col-md-12">
            <div class="list-group-item d-flex justify-content-between align-items-center">
                <div>
                    <a href="ieraksti.html">Dzimšanas dienas kūka</a>
                    <div class="d-inline ms-2">
                        <span class="badge bg-secondary filter-tag">drāma</span>
                        <span class="badge bg-secondary filter-tag">ģimene</span>
                        <span class="badge bg-secondary filter-tag">2020s</span>
                    </div>
                </div>
            </div>

            <div class="list-group-item d-flex justify-content-between align-items-center">
                <div>
                    <a href="ieraksti.html">Rotkho</a>
                    <div class="d-inline ms-2">
                        <span class="badge bg-secondary filter-tag">māksla</span>
                        <span class="badge bg-secondary filter-tag">vēsture</span>
                        <span class="badge bg-secondary filter-tag">2020s</span>
                    </div>
                </div>
            </div>

            <div class="list-group-item d-flex justify-content-between align-items-center">
                <div>
                    <a href="ieraksti.html">Lai Dievs stāv tev klāt, tu nabaga cietēj!</a>
                    <div class="d-inline ms-2">
                        <span class="badge bg-secondary filter-tag">drāma</span>
                        <span class="badge bg-secondary filter-tag">komēdija</span>
                        <span class="badge bg-secondary filter-tag">2020s</span>
                    </div>
                </div>
            </div>

            <div class="list-group-item d-flex justify-content-between align-items-center">
                <div>
                    <a href="ieraksti.html">Oblomovs</a>
                    <div class="d-inline ms-2">
                        <span class="badge bg-secondary filter-tag">drāma</span>
                        <span class="badge bg-secondary filter-tag">vēsture</span>
                        <span class="badge bg-secondary filter-tag">2010s</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            let selectedTags = new Set();

            document.querySelectorAll(".filter-tag").forEach(badge => {
                badge.addEventListener("click", function () {
                    let tag = this.textContent.trim();

                    if (selectedTags.has(tag)) {
                        selectedTags.delete(tag);
                        this.classList.remove("selected");
                    } else {
                        selectedTags.add(tag);
                        this.classList.add("selected");
                    }

                    filterEntries();
                });
            });

            document.getElementById("reset-filter").addEventListener("click", function () {
                selectedTags.clear();
                document.querySelectorAll(".filter-tag").forEach(badge => badge.classList.remove("selected"));
                document.querySelectorAll(".list-group-item").forEach(item => item.classList.remove("hidden"));
            });

            function filterEntries() {
                document.querySelectorAll(".list-group-item").forEach(item => {
                    let itemTags = Array.from(item.querySelectorAll(".filter-tag")).map(tag => tag.textContent.trim());

                    if (selectedTags.size === 0 || itemTags.some(tag => selectedTags.has(tag))) {
                        item.classList.remove("hidden");
                    } else {
                        item.classList.add("hidden");
                    }
                });
            }
        });
    </script>

{% endblock %}
